<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!--
author 이백행
since 2013-01-09
-->

<sqlMap namespace="Comtnweblog">

    <typeAlias alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias alias="comtnweblogSerarchVO" type="egovframework.codegen.comtnweblog.service.ComtnweblogDefaultVO"/>

    <resultMap id="comtnweblog" class="egovframework.codegen.comtnweblog.service.ComtnweblogVO">
        <result property="requstId" column="requst_id" columnIndex="1"/>
        <result property="occrrncDe" column="occrrnc_de" columnIndex="2"/>
        <result property="url" column="url" columnIndex="3"/>
        <result property="rqesterId" column="rqester_id" columnIndex="4"/>
        <result property="rqesterIp" column="rqester_ip" columnIndex="5"/>
    </resultMap>

    <insert id="comtnweblogDAO.insertComtnweblog_S">
        <![CDATA[
            INSERT INTO comtnweblog
                ( requst_id
                  , occrrnc_de
                  , url
                  , rqester_id
                  , rqester_ip )
            VALUES ( #requstId#
                  , #occrrncDe#
                  , #url#
                  , #rqesterId#
                  , #rqesterIp# )
        ]]>
    </insert>

    <update id="comtnweblogDAO.updateComtnweblog_S">
        <![CDATA[
            UPDATE comtnweblog
            SET requst_id = #requstId#
                , occrrnc_de = #occrrncDe#
                , url = #url#
                , rqester_id = #rqesterId#
                , rqester_ip = #rqesterIp#
            WHERE requst_id = #requstId#
        ]]>
    </update>

    <delete id="comtnweblogDAO.deleteComtnweblog_S">
        <![CDATA[
            DELETE FROM comtnweblog
            WHERE requst_id = #requstId#
        ]]>
    </delete>

    <select id="comtnweblogDAO.selectComtnweblog_S" resultMap="comtnweblog">
        <![CDATA[
            SELECT
                requst_id
                , occrrnc_de /* ${attribute.columnComments} */
                , url /* ${attribute.columnComments} */
                , rqester_id /* ${attribute.columnComments} */
                , rqester_ip /* ${attribute.columnComments} */
            FROM comtnweblog
            WHERE requst_id = #requstId#
        ]]>
    </select>

    <select id="comtnweblogDAO.selectComtnweblogList_D" parameterClass="comtnweblogSerarchVO" resultClass="egovMap">
           SELECT
               A.requst_id
               , A.occrrnc_de
               , A.url
               , A.rqester_id
               , A.rqester_ip
           FROM (
               SELECT
                   requst_id
                   , occrrnc_de
                   , url
                   , rqester_id
                   , rqester_ip
                   , ROWNUM
               FROM comtnweblog
               WHERE 1 = 1
               ORDER BY
                requst_id DESC
            ) A
            WHERE ROWNUM BETWEEN #firstIndex# AND #recordCountPerPage#
    </select>

    <select id="comtnweblogDAO.selectComtnweblogListTotCnt_S" parameterClass="comtnweblogSerarchVO" resultClass="int">
        SELECT COUNT(*) totcnt
        FROM comtnweblog
        WHERE 1 = 1
    </select>

</sqlMap>
