<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Comtnnttstats">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ComtnnttstatsVO" type="kr.godsoft.egovframe.generatorwebapp.comtnnttstats.service.ComtnnttstatsVO"/>
	
	<resultMap id="comtnnttstats" class="kr.godsoft.egovframe.generatorwebapp.comtnnttstats.service.ComtnnttstatsVO">
		<result property="statsId" column="stats_id" columnIndex="1"/>
		<result property="ntceCo" column="ntce_co" columnIndex="2"/>
		<result property="avrgRdcnt" column="avrg_rdcnt" columnIndex="3"/>
		<result property="topRdcnt" column="top_rdcnt" columnIndex="4"/>
		<result property="mummRdcnt" column="mumm_rdcnt" columnIndex="5"/>
		<result property="topNtcrId" column="top_ntcr_id" columnIndex="6"/>
	</resultMap>
	
	<insert id="comtnnttstatsDAO.insertComtnnttstats_S">
		<![CDATA[
            INSERT INTO comtnnttstats (
                stats_id
                , ntce_co
                , avrg_rdcnt
                , top_rdcnt
                , mumm_rdcnt
                , top_ntcr_id
            ) VALUES (
                #statsId#
                , #ntceCo#
                , #avrgRdcnt#
                , #topRdcnt#
                , #mummRdcnt#
                , #topNtcrId#
            )
		]]>
	</insert>
	
	<update id="comtnnttstatsDAO.updateComtnnttstats_S">
		<![CDATA[
            UPDATE comtnnttstats
                SET
                stats_id = #statsId#
                , ntce_co = #ntceCo#
                , avrg_rdcnt = #avrgRdcnt#
                , top_rdcnt = #topRdcnt#
                , mumm_rdcnt = #mummRdcnt#
                , top_ntcr_id = #topNtcrId#
                WHERE 1 = 1
                AND stats_id = #statsId#
		]]>
	</update>
	
	<delete id="comtnnttstatsDAO.deleteComtnnttstats_S">
		<![CDATA[
			DELETE FROM comtnnttstats
				WHERE 1 = 1
				AND stats_id = #statsId#
		]]>
	</delete>
	
	<select id="comtnnttstatsDAO.selectComtnnttstats_S" resultMap="comtnnttstats">
		<![CDATA[
			SELECT
				stats_id
				, ntce_co
				, avrg_rdcnt
				, top_rdcnt
				, mumm_rdcnt
				, top_ntcr_id
			FROM COMTNNTTSTATS
			WHERE stats_id = #statsId#
		]]>
	</select>
	
	<select id="comtnnttstatsDAO.selectComtnnttstatsList_D" parameterClass="ComtnnttstatsVO" resultClass="egovMap">
	       SELECT 
								A.STATS_ID
								, A.NTCE_CO
								, A.AVRG_RDCNT
								, A.TOP_RDCNT
								, A.MUMM_RDCNT
								, A.TOP_NTCR_ID
			       FROM
            (
				SELECT
								STATS_ID
								, NTCE_CO
								, AVRG_RDCNT
								, TOP_RDCNT
								, MUMM_RDCNT
								, TOP_NTCR_ID
							, ROWNUM
				FROM COMTNNTTSTATS
				WHERE 1=1
				<isEqual prepend="AND" property="searchCondition" compareValue="0">
					STATS_ID = #searchKeyword#
				</isEqual>
					<isEqual prepend="AND" property="searchCondition" compareValue="1">
					NTCE_CO LIKE '%' || #searchKeyword# || '%'
				</isEqual>
						ORDER BY 
							STATS_ID DESC
					) A
			WHERE ROWNUM BETWEEN #firstIndex# AND #recordCountPerPage#
	</select>

	<select id="comtnnttstatsDAO.selectComtnnttstatsListTotCnt_S" parameterClass="ComtnnttstatsVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM COMTNNTTSTATS
			WHERE 1=1
			<isEqual prepend="AND" property="searchCondition" compareValue="0">
				STATS_ID = #searchKeyword#
			</isEqual>
				<isEqual prepend="AND" property="searchCondition" compareValue="1">
				NTCE_CO LIKE '%' || #searchKeyword# || '%'
			</isEqual>
		</select>

</sqlMap>
