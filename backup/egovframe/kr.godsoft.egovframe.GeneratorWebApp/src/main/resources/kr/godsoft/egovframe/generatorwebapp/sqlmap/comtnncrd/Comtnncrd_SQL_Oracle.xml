<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Comtnncrd">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ComtnncrdVO" type="kr.godsoft.egovframe.generatorwebapp.comtnncrd.service.ComtnncrdVO"/>
	
	<resultMap id="comtnncrd" class="kr.godsoft.egovframe.generatorwebapp.comtnncrd.service.ComtnncrdVO">
		<result property="ncrdId" column="ncrd_id" columnIndex="1"/>
		<result property="ncrdTrgterId" column="ncrd_trgter_id" columnIndex="2"/>
		<result property="nm" column="nm" columnIndex="3"/>
		<result property="telno" column="telno" columnIndex="4"/>
		<result property="nationNo" column="nation_no" columnIndex="5"/>
		<result property="areaNo" column="area_no" columnIndex="6"/>
		<result property="middleTelno" column="middle_telno" columnIndex="7"/>
		<result property="endTelno" column="end_telno" columnIndex="8"/>
		<result property="mbtlnum" column="mbtlnum" columnIndex="9"/>
		<result property="idntfcNo" column="idntfc_no" columnIndex="10"/>
		<result property="middleMbtlnum" column="middle_mbtlnum" columnIndex="11"/>
		<result property="endMbtlnum" column="end_mbtlnum" columnIndex="12"/>
		<result property="emailAdres" column="email_adres" columnIndex="13"/>
		<result property="cmpnyNm" column="cmpny_nm" columnIndex="14"/>
		<result property="deptNm" column="dept_nm" columnIndex="15"/>
		<result property="adres" column="adres" columnIndex="16"/>
		<result property="detailAdres" column="detail_adres" columnIndex="17"/>
		<result property="ofcpsNm" column="ofcps_nm" columnIndex="18"/>
		<result property="clsfNm" column="clsf_nm" columnIndex="19"/>
		<result property="extrlUserAt" column="extrl_user_at" columnIndex="20"/>
		<result property="othbcAt" column="othbc_at" columnIndex="21"/>
		<result property="rm" column="rm" columnIndex="22"/>
		<result property="frstRegistPnttm" column="frst_regist_pnttm" columnIndex="23"/>
		<result property="frstRegisterId" column="frst_register_id" columnIndex="24"/>
		<result property="lastUpdtPnttm" column="last_updt_pnttm" columnIndex="25"/>
		<result property="lastUpdusrId" column="last_updusr_id" columnIndex="26"/>
	</resultMap>
	
	<insert id="comtnncrdDAO.insertComtnncrd_S">
		<![CDATA[
            INSERT INTO comtnncrd (
                ncrd_id
                , ncrd_trgter_id
                , nm
                , telno
                , nation_no
                , area_no
                , middle_telno
                , end_telno
                , mbtlnum
                , idntfc_no
                , middle_mbtlnum
                , end_mbtlnum
                , email_adres
                , cmpny_nm
                , dept_nm
                , adres
                , detail_adres
                , ofcps_nm
                , clsf_nm
                , extrl_user_at
                , othbc_at
                , rm
                , frst_regist_pnttm
                , frst_register_id
            ) VALUES (
                #ncrdId#
                , #ncrdTrgterId#
                , #nm#
                , #telno#
                , #nationNo#
                , #areaNo#
                , #middleTelno#
                , #endTelno#
                , #mbtlnum#
                , #idntfcNo#
                , #middleMbtlnum#
                , #endMbtlnum#
                , #emailAdres#
                , #cmpnyNm#
                , #deptNm#
                , #adres#
                , #detailAdres#
                , #ofcpsNm#
                , #clsfNm#
                , #extrlUserAt#
                , #othbcAt#
                , #rm#
                , SYSDATE
                , #frstRegisterId#
            )
		]]>
	</insert>
	
	<update id="comtnncrdDAO.updateComtnncrd_S">
		<![CDATA[
            UPDATE comtnncrd
                SET
                ncrd_id = #ncrdId#
                , ncrd_trgter_id = #ncrdTrgterId#
                , nm = #nm#
                , telno = #telno#
                , nation_no = #nationNo#
                , area_no = #areaNo#
                , middle_telno = #middleTelno#
                , end_telno = #endTelno#
                , mbtlnum = #mbtlnum#
                , idntfc_no = #idntfcNo#
                , middle_mbtlnum = #middleMbtlnum#
                , end_mbtlnum = #endMbtlnum#
                , email_adres = #emailAdres#
                , cmpny_nm = #cmpnyNm#
                , dept_nm = #deptNm#
                , adres = #adres#
                , detail_adres = #detailAdres#
                , ofcps_nm = #ofcpsNm#
                , clsf_nm = #clsfNm#
                , extrl_user_at = #extrlUserAt#
                , othbc_at = #othbcAt#
                , rm = #rm#
                , last_updt_pnttm = SYSDATE
                , last_updusr_id = #lastUpdusrId#
                WHERE 1 = 1
                AND ncrd_id = #ncrdId#
		]]>
	</update>
	
	<delete id="comtnncrdDAO.deleteComtnncrd_S">
		<![CDATA[
			DELETE FROM comtnncrd
				WHERE 1 = 1
				AND ncrd_id = #ncrdId#
		]]>
	</delete>
	
	<select id="comtnncrdDAO.selectComtnncrd_S" resultMap="comtnncrd">
		<![CDATA[
			SELECT
				ncrd_id
				, ncrd_trgter_id
				, nm
				, telno
				, nation_no
				, area_no
				, middle_telno
				, end_telno
				, mbtlnum
				, idntfc_no
				, middle_mbtlnum
				, end_mbtlnum
				, email_adres
				, cmpny_nm
				, dept_nm
				, adres
				, detail_adres
				, ofcps_nm
				, clsf_nm
				, extrl_user_at
				, othbc_at
				, rm
				, frst_regist_pnttm
				, frst_register_id
				, last_updt_pnttm
				, last_updusr_id
			FROM COMTNNCRD
			WHERE ncrd_id = #ncrdId#
		]]>
	</select>
	
	<select id="comtnncrdDAO.selectComtnncrdList_D" parameterClass="ComtnncrdVO" resultClass="egovMap">
	       SELECT 
								A.NCRD_ID
								, A.NCRD_TRGTER_ID
								, A.NM
								, A.TELNO
								, A.NATION_NO
								, A.AREA_NO
								, A.MIDDLE_TELNO
								, A.END_TELNO
								, A.MBTLNUM
								, A.IDNTFC_NO
								, A.MIDDLE_MBTLNUM
								, A.END_MBTLNUM
								, A.EMAIL_ADRES
								, A.CMPNY_NM
								, A.DEPT_NM
								, A.ADRES
								, A.DETAIL_ADRES
								, A.OFCPS_NM
								, A.CLSF_NM
								, A.EXTRL_USER_AT
								, A.OTHBC_AT
								, A.RM
								, A.FRST_REGIST_PNTTM
								, A.FRST_REGISTER_ID
								, A.LAST_UPDT_PNTTM
								, A.LAST_UPDUSR_ID
			       FROM
            (
				SELECT
								NCRD_ID
								, NCRD_TRGTER_ID
								, NM
								, TELNO
								, NATION_NO
								, AREA_NO
								, MIDDLE_TELNO
								, END_TELNO
								, MBTLNUM
								, IDNTFC_NO
								, MIDDLE_MBTLNUM
								, END_MBTLNUM
								, EMAIL_ADRES
								, CMPNY_NM
								, DEPT_NM
								, ADRES
								, DETAIL_ADRES
								, OFCPS_NM
								, CLSF_NM
								, EXTRL_USER_AT
								, OTHBC_AT
								, RM
								, FRST_REGIST_PNTTM
								, FRST_REGISTER_ID
								, LAST_UPDT_PNTTM
								, LAST_UPDUSR_ID
							, ROWNUM
				FROM COMTNNCRD
				WHERE 1=1
				<isEqual prepend="AND" property="searchCondition" compareValue="0">
					NCRD_ID = #searchKeyword#
				</isEqual>
					<isEqual prepend="AND" property="searchCondition" compareValue="1">
					NCRD_TRGTER_ID LIKE '%' || #searchKeyword# || '%'
				</isEqual>
						ORDER BY 
							NCRD_ID DESC
					) A
			WHERE ROWNUM BETWEEN #firstIndex# AND #recordCountPerPage#
	</select>

	<select id="comtnncrdDAO.selectComtnncrdListTotCnt_S" parameterClass="ComtnncrdVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM COMTNNCRD
			WHERE 1=1
			<isEqual prepend="AND" property="searchCondition" compareValue="0">
				NCRD_ID = #searchKeyword#
			</isEqual>
				<isEqual prepend="AND" property="searchCondition" compareValue="1">
				NCRD_TRGTER_ID LIKE '%' || #searchKeyword# || '%'
			</isEqual>
		</select>

</sqlMap>
