<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="Comtsbbssummary">
	
	<typeAlias  alias="egovMap" type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="ComtsbbssummaryVO" type="kr.godsoft.egovframe.generatorwebapp.comtsbbssummary.service.ComtsbbssummaryVO"/>
	
	<resultMap id="comtsbbssummary" class="kr.godsoft.egovframe.generatorwebapp.comtsbbssummary.service.ComtsbbssummaryVO">
		<result property="occrrncDe" column="occrrnc_de" columnIndex="1"/>
		<result property="statsSe" column="stats_se" columnIndex="2"/>
		<result property="detailStatsSe" column="detail_stats_se" columnIndex="3"/>
		<result property="creatCo" column="creat_co" columnIndex="4"/>
		<result property="totRdcnt" column="tot_rdcnt" columnIndex="5"/>
		<result property="avrgRdcnt" column="avrg_rdcnt" columnIndex="6"/>
		<result property="topInqireBbscttId" column="top_inqire_bbsctt_id" columnIndex="7"/>
		<result property="mummInqireBbscttId" column="mumm_inqire_bbsctt_id" columnIndex="8"/>
		<result property="topNtcrId" column="top_ntcr_id" columnIndex="9"/>
	</resultMap>
	
	<insert id="comtsbbssummaryDAO.insertComtsbbssummary_S">
		<![CDATA[
            INSERT INTO comtsbbssummary (
                occrrnc_de
                , stats_se
                , detail_stats_se
                , creat_co
                , tot_rdcnt
                , avrg_rdcnt
                , top_inqire_bbsctt_id
                , mumm_inqire_bbsctt_id
                , top_ntcr_id
            ) VALUES (
                #occrrncDe#
                , #statsSe#
                , #detailStatsSe#
                , #creatCo#
                , #totRdcnt#
                , #avrgRdcnt#
                , #topInqireBbscttId#
                , #mummInqireBbscttId#
                , #topNtcrId#
            )
		]]>
	</insert>
	
	<update id="comtsbbssummaryDAO.updateComtsbbssummary_S">
		<![CDATA[
            UPDATE comtsbbssummary
                SET
                occrrnc_de = #occrrncDe#
                , stats_se = #statsSe#
                , detail_stats_se = #detailStatsSe#
                , creat_co = #creatCo#
                , tot_rdcnt = #totRdcnt#
                , avrg_rdcnt = #avrgRdcnt#
                , top_inqire_bbsctt_id = #topInqireBbscttId#
                , mumm_inqire_bbsctt_id = #mummInqireBbscttId#
                , top_ntcr_id = #topNtcrId#
                WHERE 1 = 1
                AND occrrnc_de = #occrrncDe#
                AND stats_se = #statsSe#
                AND detail_stats_se = #detailStatsSe#
		]]>
	</update>
	
	<delete id="comtsbbssummaryDAO.deleteComtsbbssummary_S">
		<![CDATA[
			DELETE FROM comtsbbssummary
				WHERE 1 = 1
				AND occrrnc_de = #occrrncDe#
				AND stats_se = #statsSe#
				AND detail_stats_se = #detailStatsSe#
		]]>
	</delete>
	
	<select id="comtsbbssummaryDAO.selectComtsbbssummary_S" resultMap="comtsbbssummary">
		<![CDATA[
			SELECT
				occrrnc_de
				, stats_se
				, detail_stats_se
				, creat_co
				, tot_rdcnt
				, avrg_rdcnt
				, top_inqire_bbsctt_id
				, mumm_inqire_bbsctt_id
				, top_ntcr_id
			FROM COMTSBBSSUMMARY
			WHERE occrrnc_de = #occrrncDe#
				AND stats_se = #statsSe#
				AND detail_stats_se = #detailStatsSe#
		]]>
	</select>
	
	<select id="comtsbbssummaryDAO.selectComtsbbssummaryList_D" parameterClass="ComtsbbssummaryVO" resultClass="egovMap">
	       SELECT 
								A.OCCRRNC_DE
								, A.STATS_SE
								, A.DETAIL_STATS_SE
								, A.CREAT_CO
								, A.TOT_RDCNT
								, A.AVRG_RDCNT
								, A.TOP_INQIRE_BBSCTT_ID
								, A.MUMM_INQIRE_BBSCTT_ID
								, A.TOP_NTCR_ID
			       FROM
            (
				SELECT
								OCCRRNC_DE
								, STATS_SE
								, DETAIL_STATS_SE
								, CREAT_CO
								, TOT_RDCNT
								, AVRG_RDCNT
								, TOP_INQIRE_BBSCTT_ID
								, MUMM_INQIRE_BBSCTT_ID
								, TOP_NTCR_ID
							, ROWNUM
				FROM COMTSBBSSUMMARY
				WHERE 1=1
				<isEqual prepend="AND" property="searchCondition" compareValue="0">
					OCCRRNC_DE = #searchKeyword#
				</isEqual>
					<isEqual prepend="AND" property="searchCondition" compareValue="1">
					STATS_SE LIKE '%' || #searchKeyword# || '%'
				</isEqual>
						ORDER BY 
							OCCRRNC_DE DESC
							, STATS_SE DESC
							, DETAIL_STATS_SE DESC
					) A
			WHERE ROWNUM BETWEEN #firstIndex# AND #recordCountPerPage#
	</select>

	<select id="comtsbbssummaryDAO.selectComtsbbssummaryListTotCnt_S" parameterClass="ComtsbbssummaryVO" resultClass="int">
			SELECT COUNT(*) totcnt
			FROM COMTSBBSSUMMARY
			WHERE 1=1
			<isEqual prepend="AND" property="searchCondition" compareValue="0">
				OCCRRNC_DE = #searchKeyword#
			</isEqual>
				<isEqual prepend="AND" property="searchCondition" compareValue="1">
				STATS_SE LIKE '%' || #searchKeyword# || '%'
			</isEqual>
		</select>

</sqlMap>
